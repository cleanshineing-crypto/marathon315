<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sub 315 å·”å³°ç´€éŒ„è¡¨ - å¼·é¢¨å¹æ‹‚</title>
    <style>
        :root { --primary: #f39c12; --secondary: #2c3e50; --accent: #e74c3c; --white: #ffffff; }
        body { font-family: 'Noto Sans TC', sans-serif; background: var(--secondary); color: var(--white); margin: 0; padding: 15px; }
        .speed-lines { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,255,255,0.03) 41px); z-index: -1; animation: move-lines 0.5s linear infinite; }
        @keyframes move-lines { from { transform: translateX(0); } to { transform: translateX(41px); } }
        .container { max-width: 950px; margin: 0 auto; }
        header { text-align: center; padding: 25px; background: linear-gradient(135deg, var(--accent), var(--primary)); border-radius: 5px; box-shadow: 8px 8px 0px #000; margin-bottom: 25px; transform: skew(-3deg); }
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; }
        .stat-card { background: rgba(255,255,255,0.1); padding: 15px; border-bottom: 4px solid var(--primary); text-align: center; }
        .stat-card p { font-size: 20px; font-weight: 900; margin: 5px 0; }
        .week-selector { display: flex; overflow-x: auto; gap: 8px; padding-bottom: 15px; }
        .week-btn { padding: 10px 20px; background: transparent; color: white; border: 2px solid white; cursor: pointer; font-weight: 900; font-style: italic; white-space: nowrap; }
        .week-btn.active { background: white; color: var(--secondary); box-shadow: 4px 4px 0px var(--primary); }
        .table-container { background: white; color: black; box-shadow: 12px 12px 0px var(--primary); margin-bottom: 30px; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #000; color: white; padding: 12px; font-style: italic; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #ddd; font-weight: 700; }
        tr:hover { background: #f9f9f9; }
        .stride-info { color: #d35400; font-size: 11px; font-weight: 400; display: block; margin-top: 5px; }
        input { width: 45px; padding: 5px; border: 2px solid #000; font-weight: bold; text-align: center; background: #fffde7; }
        .runner-box { position: fixed; bottom: 20px; right: 20px; text-align: center; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; }
        .runner-sprite { font-size: 30px; animation: run-anim 0.6s steps(2) infinite; }
        @keyframes run-anim { from { transform: skewX(10deg); } to { transform: skewX(-10deg); } }
        .clear-btn { background: #666; color: white; border: none; padding: 10px; cursor: pointer; font-size: 10px; margin-top: 20px; opacity: 0.5; }
        .clear-btn:hover { opacity: 1; }
    </style>
</head>
<body>
<div class="speed-lines"></div>
<div class="container">
    <header>
        <h1>é ‚é»ã‚’ç›®æŒ‡ã›ï¼ Sub 315</h1>
        <p>ã€Œé€™ä¸åªæ˜¯ç´€éŒ„ï¼Œé€™æ˜¯é€šå¾€å¼·å¤§çš„è·¯å¾‘ã€‚ã€</p>
    </header>
    <div class="stats">
        <div class="stat-card"><h3>å€’æ•¸æ—¥</h3><p id="countdown">--</p></div>
        <div class="stat-card"><h3>ç¸½ç´¯ç©é‡Œç¨‹</h3><p id="total-km">0</p></div>
        <div class="stat-card"><h3>ç›®æ¨™é…é€Ÿ</h3><p>04:37</p></div>
    </div>
    <div class="week-selector" id="week-selector"></div>
    <div class="table-container">
        <table>
            <thead><tr><th>æ—¥æœŸ/æ˜Ÿ</th><th>èª²è¡¨å…§å®¹</th><th>è·³ç¹©</th><th>km</th><th>å¿ƒç‡</th><th>ç–²å‹</th></tr></thead>
            <tbody id="plan-body"></tbody>
        </table>
    </div>
    <button class="clear-btn" onclick="clearData()">æ¸…é™¤æ‰€æœ‰å„²å­˜æ•¸æ“š (é‡æ–°é–‹å§‹)</button>
    <div class="runner-box"><div class="runner-sprite">ğŸƒâ€â™‚ï¸ğŸ’¨</div><div style="font-size:10px">ç°äºŒåœ¨çœ‹è‘—ä½ </div></div>
</div>

<script>
    // å®Œæ•´ 10 é€±èª²è¡¨æ•¸æ“š
    const weeks = ["æ¢å¾©","å•Ÿå‹•","é–‹ç™¼","å¼·åŒ–","å·”å³°I","èª¿æ•´","å·”å³°II","æ¨¡æ“¬","æ¸›é‡","æ¯”è³½"];
    const fullPlan = [
        [{d: "1/12 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest", n:"å•Ÿå‹•"},{d: "1/13 (äºŒ)", r: "8k E + 6 è¶Ÿè¡åˆº", s: 1000, t:"train"},{d: "1/14 (ä¸‰)", r: "6-8k Easy", s: 2000, t:"easy"},{d: "1/15 (å››)", r: "10k E", s: 1000, t:"train"},{d: "1/16 (äº”)", r: "6-8k Easy", s: 2000, t:"easy"},{d: "1/17 (å…­)", r: "15k E LSD", s: 0, t:"lsd"},{d: "1/18 (æ—¥)", r: "6-8k Easy", s: 2000, t:"easy"}],
        [{d: "1/19 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "1/20 (äºŒ)", r: "12k E + 6 è¶Ÿè¡åˆº", s: 1000, t:"train"},{d: "1/21 (ä¸‰)", r: "8k Easy", s: 2000, t:"easy"},{d: "1/22 (å››)", r: "15k E", s: 1000, t:"train"},{d: "1/23 (äº”)", r: "8k Easy", s: 2000, t:"easy"},{d: "1/24 (å…­)", r: "20k LSD", s: 0, t:"lsd"},{d: "1/25 (æ—¥)", r: "8k Easy", s: 2000, t:"easy"}],
        [{d: "1/26 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest", n:"æ˜¥ç¯€"},{d: "1/27 (äºŒ)", r: "5k E + 10k T + 5k E", s: 1000, t:"train", n:"åˆä¸€"},{d: "1/28 (ä¸‰)", r: "8k Easy", s: 2000, t:"easy", n:"åˆäºŒ"},{d: "1/29 (å››)", r: "18k E + 6 è¶Ÿè¡åˆº", s: 1000, t:"train", n:"åˆä¸‰"},{d: "1/30 (äº”)", r: "8k Easy", s: 2000, t:"easy", n:"åˆå››"},{d: "1/31 (å…­)", r: "25k LSD", s: 0, t:"lsd", n:"åˆäº”"},{d: "2/01 (æ—¥)", r: "8k Easy", s: 2000, t:"easy"}],
        [{d: "2/02 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "2/03 (äºŒ)", r: "5k E + 1k x 8 + 5k E", s: 1000, t:"train"},{d: "2/04 (ä¸‰)", r: "8k Easy", s: 2000, t:"easy"},{d: "2/05 (å››)", r: "20k MP", s: 1000, t:"train"},{d: "2/06 (äº”)", r: "8k Easy", s: 2000, t:"easy"},{d: "2/07 (å…­)", r: "30k LSD", s: 0, t:"lsd"},{d: "2/08 (æ—¥)", r: "8k Easy", s: 2000, t:"easy"}],
        [{d: "2/09 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "2/10 (äºŒ)", r: "22k æ¼¸é€²è·‘", s: 1000, t:"train"},{d: "2/11 (ä¸‰)", r: "8k Easy", s: 2000, t:"easy"},{d: "2/12 (å››)", r: "22k MP", s: 1000, t:"train"},{d: "2/13 (äº”)", r: "8k Easy", s: 2000, t:"easy"},{d: "2/14 (å…­)", r: "35k LSD", s: 0, t:"lsd", n:"æƒ…äººç¯€"},{d: "2/15 (æ—¥)", r: "8k Easy", s: 2000, t:"easy"}],
        [{d: "2/16 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "2/17 (äºŒ)", r: "12k E + 6 è¶Ÿè¡åˆº", s: 1000, t:"train"},{d: "2/18 (ä¸‰)", r: "5k Easy", s: 2000, t:"easy"},{d: "2/19 (å››)", r: "10k E", s: 1000, t:"train"},{d: "2/20 (äº”)", r: "5k Easy", s: 2000, t:"easy"},{d: "2/21 (å…­)", r: "18k E LSD", s: 0, t:"lsd"},{d: "2/22 (æ—¥)", r: "5k Easy", s: 2000, t:"easy"}],
        [{d: "2/23 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "2/24 (äºŒ)", r: "5k E + 3k x 4 + 5k E", s: 1000, t:"train"},{d: "2/25 (ä¸‰)", r: "8k Easy", s: 2000, t:"easy"},{d: "2/26 (å››)", r: "25k MP", s: 1000, t:"train"},{d: "2/27 (äº”)", r: "8k Easy", s: 2000, t:"easy"},{d: "2/28 (å…­)", r: "38k LSD", s: 0, t:"lsd", n:"228"},{d: "3/01 (æ—¥)", r: "8k Easy", s: 2000, t:"easy"}],
        [{d: "3/02 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "3/03 (äºŒ)", r: "12k E + 6 è¶Ÿè¡åˆº", s: 1000, t:"train"},{d: "3/04 (ä¸‰)", r: "6k Easy", s: 2000, t:"easy"},{d: "3/05 (å››)", r: "10k E + 5k MP", s: 1000, t:"train"},{d: "3/06 (äº”)", r: "6k Easy", s: 2000, t:"easy"},{d: "3/07 (å…­)", r: "21k æ¨¡æ“¬è³½", s: 0, t:"lsd"},{d: "3/08 (æ—¥)", r: "6k Easy", s: 2000, t:"easy"}],
        [{d: "3/09 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "3/10 (äºŒ)", r: "10k E + 4 è¶Ÿè¡åˆº", s: 1000, t:"train"},{d: "3/11 (ä¸‰)", r: "5k Easy", s: 2000, t:"easy"},{d: "3/12 (å››)", r: "8k E", s: 1000, t:"train"},{d: "3/13 (äº”)", r: "5k Easy", s: 2000, t:"easy"},{d: "3/14 (å…­)", r: "12k E LSD", s: 0, t:"lsd"},{d: "3/15 (æ—¥)", r: "5k Easy", s: 2000, t:"easy"}],
        [{d: "3/16 (ä¸€)", r: "å…¨ä¼‘", s: 2000, t:"rest"},{d: "3/17 (äºŒ)", r: "6k E + 4 è¶Ÿè¡åˆº", s: 1000, t:"train"},{d: "3/18 (ä¸‰)", r: "4k Easy", s: 1000, t:"easy"},{d: "3/19 (å››)", r: "5k (å« 2k MP)", s: 500, t:"train"},{d: "3/20 (äº”)", r: "å…¨ä¼‘", s: 0, t:"rest"},{d: "3/21 (å…­)", r: "3k ç†±èº«", s: 0, t:"easy"},{d: "3/22 (æ—¥)", r: "æ­£å¼æ¯”è³½", s: 0, t:"lsd", n:"é ‚é»"}]
    ];

    let currentWeek = 0;
    const weekSelector = document.getElementById('week-selector');
    const planBody = document.getElementById('plan-body');

    // ç”ŸæˆæŒ‰éˆ•
    weeks.forEach((w, i) => {
        const btn = document.createElement('button');
        btn.className = `week-btn ${i===0?'active':''}`;
        btn.innerText = `W${i+1} ${w}`;
        btn.onclick = () => showWeek(i);
        weekSelector.appendChild(btn);
    });

    function showWeek(idx) {
        currentWeek = idx;
        document.querySelectorAll('.week-btn').forEach((b, i) => b.classList.toggle('active', i === idx));
        planBody.innerHTML = fullPlan[idx].map((day, dIdx) => {
            const idBase = `w${idx}d${dIdx}`;
            return `
            <tr>
                <td>${day.d}${day.n?`<span style="color:red;display:block;font-size:10px">${day.n}</span>`:''}</td>
                <td>${day.r}${day.r.includes('è¡åˆº')?`<span class="stride-info">âš¡100m åŠ é€Ÿ / ä¼‘ 90s</span>`:''}</td>
                <td>${day.s}</td>
                <td><input type="text" id="${idBase}km" oninput="saveData()" value="${localStorage.getItem(idBase+'km')||''}"></td>
                <td><input type="text" id="${idBase}hr" oninput="saveData()" value="${localStorage.getItem(idBase+'hr')||''}"></td>
                <td><input type="text" id="${idBase}fe" oninput="saveData()" value="${localStorage.getItem(idBase+'fe')||''}"></td>
            </tr>`;
        }).join('');
    }

    function saveData() {
        fullPlan[currentWeek].forEach((_, dIdx) => {
            const idBase = `w${currentWeek}d${dIdx}`;
            localStorage.setItem(idBase+'km', document.getElementById(idBase+'km').value);
            localStorage.setItem(idBase+'hr', document.getElementById(idBase+'hr').value);
            localStorage.setItem(idBase+'fe', document.getElementById(idBase+'fe').value);
        });
        calculateTotal();
    }

    function calculateTotal() {
        let total = 0;
        for(let i=0; i<70; i++) {
            const w = Math.floor(i/7);
            const d = i%7;
            const val = localStorage.getItem(`w${w}d${d}km`);
            if(val) total += parseFloat(val) || 0;
        }
        document.getElementById('total-km').innerText = total.toFixed(1) + " km";
    }

    function clearData() { if(confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è¨“ç·´ç´€éŒ„å—ï¼Ÿ")) { localStorage.clear(); location.reload(); } }

    const raceDay = new Date('2026-03-22');
    const diff = Math.ceil((raceDay - new Date()) / (1000 * 60 * 60 * 24));
    document.getElementById('countdown').innerText = diff > 0 ? diff + " å¤©" : "ç®±æ ¹ã®é ‚é»ã¸ï¼";

    showWeek(0); calculateTotal();
</script>
</body>
</html>